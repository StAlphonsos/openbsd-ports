$OpenBSD$

diff -Nup mozilla-esr31/dom/workers/Navigator.h tor-browser/dom/workers/Navigator.h
--- dom/workers/Navigator.h.orig	Mon Jan  5 23:08:07 2015
+++ dom/workers/Navigator.h	Tue Feb 17 14:37:55 2015
@@ -7,6 +7,7 @@
 #define mozilla_dom_workers_navigator_h__
 
 #include "Workers.h"
+#include "RuntimeService.h"
 #include "nsString.h"
 #include "nsWrapperCache.h"
 
@@ -14,21 +15,14 @@ BEGIN_WORKERS_NAMESPACE
 
 class WorkerNavigator MOZ_FINAL : public nsWrapperCache
 {
-  nsString mAppName;
-  nsString mAppVersion;
-  nsString mPlatform;
-  nsString mUserAgent;
+  typedef struct RuntimeService::NavigatorProperties NavigatorProperties;
+
+  NavigatorProperties mProperties;
   bool mOnline;
 
-  WorkerNavigator(const nsAString& aAppName,
-                  const nsAString& aAppVersion,
-                  const nsAString& aPlatform,
-                  const nsAString& aUserAgent,
+  WorkerNavigator(const NavigatorProperties& aProperties,
                   bool aOnline)
-    : mAppName(aAppName)
-    , mAppVersion(aAppVersion)
-    , mPlatform(aPlatform)
-    , mUserAgent(aUserAgent)
+    : mProperties(aProperties)
     , mOnline(aOnline)
   {
     MOZ_COUNT_CTOR(WorkerNavigator);
@@ -59,24 +53,17 @@ class WorkerNavigator MOZ_FINAL : public nsWrapperCach
   {
     aAppCodeName.AssignLiteral("Mozilla");
   }
-  void GetAppName(nsString& aAppName) const
-  {
-    aAppName = mAppName;
-  }
+  void GetAppName(nsString& aAppName) const;
 
-  void GetAppVersion(nsString& aAppVersion) const
-  {
-    aAppVersion = mAppVersion;
-  }
+  void GetAppVersion(nsString& aAppVersion) const;
 
-  void GetPlatform(nsString& aPlatform) const
-  {
-    aPlatform = mPlatform;
-  }
+  void GetPlatform(nsString& aPlatform) const;
+
   void GetProduct(nsString& aProduct) const
   {
     aProduct.AssignLiteral("Gecko");
   }
+
   bool TaintEnabled() const
   {
     return false;
@@ -84,7 +71,7 @@ class WorkerNavigator MOZ_FINAL : public nsWrapperCach
 
   void GetUserAgent(nsString& aUserAgent) const
   {
-    aUserAgent = mUserAgent;
+    aUserAgent = mProperties.mUserAgent;
   }
 
   bool OnLine() const
