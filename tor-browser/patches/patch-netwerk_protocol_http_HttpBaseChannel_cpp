$OpenBSD$

diff -Nup mozilla-esr31/netwerk/protocol/http/HttpBaseChannel.cpp tor-browser/netwerk/protocol/http/HttpBaseChannel.cpp
--- netwerk/protocol/http/HttpBaseChannel.cpp.orig	Mon Jan  5 23:07:57 2015
+++ netwerk/protocol/http/HttpBaseChannel.cpp	Tue Feb 17 14:37:56 2015
@@ -68,6 +68,7 @@ HttpBaseChannel::HttpBaseChannel()
   , mContentDispositionHint(UINT32_MAX)
   , mHttpHandler(gHttpHandler)
   , mRedirectCount(0)
+  , mProxyURI(nullptr)
 {
   LOG(("Creating HttpBaseChannel @%x\n", this));
 
@@ -1071,6 +1072,15 @@ HttpBaseChannel::SetReferrer(nsIURI *referrer)
   // finally, remember the referrer URI and set the Referer header.
   mReferrer = clone;
   mRequestHead.SetHeader(nsHttp::Referer, spec);
+  return NS_OK;
+}
+
+NS_IMETHODIMP
+HttpBaseChannel::GetProxyURI(nsIURI** proxyURI)
+{
+  NS_ENSURE_ARG_POINTER(proxyURI);
+  *proxyURI = mProxyURI;
+  NS_IF_ADDREF(*proxyURI);
   return NS_OK;
 }
 
