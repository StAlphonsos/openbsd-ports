$OpenBSD$

diff -Nup mozilla-esr31/security/manager/ssl/src/nsTLSSocketProvider.cpp tor-browser/security/manager/ssl/src/nsTLSSocketProvider.cpp
--- security/manager/ssl/src/nsTLSSocketProvider.cpp.orig	Mon Jan  5 23:07:59 2015
+++ security/manager/ssl/src/nsTLSSocketProvider.cpp	Tue Feb 17 14:37:56 2015
@@ -22,8 +22,7 @@ NS_IMETHODIMP
 nsTLSSocketProvider::NewSocket(int32_t family,
                                const char *host,
                                int32_t port,
-                               const char *proxyHost,
-                               int32_t proxyPort,
+                               nsIProxyInfo *proxy,
                                uint32_t flags,
                                PRFileDesc **_result,
                                nsISupports **securityInfo)
@@ -31,8 +30,7 @@ nsTLSSocketProvider::NewSocket(int32_t family,
   nsresult rv = nsSSLIOLayerNewSocket(family,
                                       host,
                                       port,
-                                      proxyHost,
-                                      proxyPort,
+                                      proxy,
                                       _result,
                                       securityInfo,
                                       true,
@@ -46,8 +44,7 @@ NS_IMETHODIMP
 nsTLSSocketProvider::AddToSocket(int32_t family,
                                  const char *host,
                                  int32_t port,
-                                 const char *proxyHost,
-                                 int32_t proxyPort,
+                                 nsIProxyInfo *proxy,
                                  uint32_t flags,
                                  PRFileDesc *aSocket,
                                  nsISupports **securityInfo)
@@ -55,8 +52,7 @@ nsTLSSocketProvider::AddToSocket(int32_t family,
   nsresult rv = nsSSLIOLayerAddToSocket(family,
                                         host,
                                         port,
-                                        proxyHost,
-                                        proxyPort,
+                                        proxy,
                                         aSocket,
                                         securityInfo,
                                         true,
