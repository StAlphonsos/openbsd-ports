$OpenBSD$

diff -Nup mozilla-esr31/netwerk/protocol/http/nsHttpConnection.cpp tor-browser/netwerk/protocol/http/nsHttpConnection.cpp
--- netwerk/protocol/http/nsHttpConnection.cpp.orig	Mon Jan  5 23:07:57 2015
+++ netwerk/protocol/http/nsHttpConnection.cpp	Tue Feb 17 14:37:56 2015
@@ -1595,12 +1595,9 @@ nsHttpConnection::SetupProxyConnect()
     request.SetHeader(nsHttp::Proxy_Connection, NS_LITERAL_CSTRING("keep-alive"));
     request.SetHeader(nsHttp::Connection, NS_LITERAL_CSTRING("keep-alive"));
 
-    val = mTransaction->RequestHead()->PeekHeader(nsHttp::Host);
-    if (val) {
-        // all HTTP/1.1 requests must include a Host header (even though it
-        // may seem redundant in this case; see bug 82388).
-        request.SetHeader(nsHttp::Host, nsDependentCString(val));
-    }
+    // all HTTP/1.1 requests must include a Host header (even though it
+    // may seem redundant in this case; see bug 82388).
+    request.SetHeader(nsHttp::Host, buf);
 
     val = mTransaction->RequestHead()->PeekHeader(nsHttp::Proxy_Authorization);
     if (val) {
